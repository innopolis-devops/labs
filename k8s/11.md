# Lab 11

## Creating secret manually

I created `apps-secret` using the following command:
```shell
kubectl create secret generic apps-secret \
  --from-literal=username=app-username-secret \
  --from-literal=password=app-secret-password
```

### Verification of the secrets

* Result of execution of the command `kubectl get secrets`:
![1.png](./images/lab-11/1.png)
* Result of execution of the command `kubectl describe secret apps-secret`:
![2.png](./images/lab-11/2.png)
* Result of execution of the command `kubectl get secret apps-secret -o jsonpath='{.data}'`:
![3.png](./images/lab-11/3.png)
* After decoding of `base64`:
![4.png](./images/lab-11/4.png)

## Creating secret using `helm`

I switched to ubuntu OS(since there was a problem with helm secrets plugin) 
and created 2 secrets using public-private keys (`gpg`) and `soap`:
```shell
username=secret-username
password=secret-password
```

### Verification of the secrets

* Result of execution of the command `kubectl get secrets`:
![5.png](./images/lab-11/5.png)
* Result of execution of the command `kubectl get pods`:
![6.png](./images/lab-11/6.png)
* Result of execution of the command `kubectl exec app-python-app-helm-598d49878b-v5s6s -- printenv | grep USERNAME`:
![7.png](./images/lab-11/7.png)
* Result of execution of the command `kubectl exec app-python-app-helm-598d49878b-v5s6s -- printenv | grep PASSWORD`:
![8.png](./images/lab-11/8.png)

## Limiting the resources(cpu and memory)

I limited resources of `app-python` and `app-java` via editing files `app-python-values.yaml` 
and `app-java-values.yaml` respectively.

* Result of execution of the command `kubectl get pods`:
![6.png](./images/lab-11/6.png)
* Result of execution of the command `kubectl describe pod app-python-app-helm-598d49878b-v5s6s`:
![9.png](./images/lab-11/9.png)

## Bonus task

I moved all env variables to the template "app-helm.envs" adding specific env variable for 
test purposes `TEST_ENV=TEST_VALUE`.

* Result of execution of the command `kubectl get pods`:
![10.png](./images/lab-11/10.png)
* Result of execution of the command `kubectl exec -it app-python-app-helm-7d96bdf5fc-vpd4z -- printenv`:
![11.png](./images/lab-11/11.png)


