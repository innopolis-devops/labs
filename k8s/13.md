# StatefulSet

1. Put an output of `kubectl get po,sts,svc,pvc` command:

```bash
[nailya@nailya DevOps-labs]$ kubectl get po,sts,svc,pvc
NAME                                READY   STATUS    RESTARTS   AGE
pod/app-python-app-python-0         1/1     Running   0          38s
pod/app-python-app-python-1         1/1     Running   0          38s

NAME                                           READY   AGE
statefulset.apps/app-python-app-python         2/2     38s

NAME                                  TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE
service/app-python-app-python         LoadBalancer   10.112.193.40   <pending>     80:30842/TCP   38s
service/kubernetes                    ClusterIP      10.96.0.1       <none>        443/TCP        23h

NAME                                                                    STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
persistentvolumeclaim/app-python-volume-app-python-app-python-0         Bound    pvc-6d8b4563-f4s5-6472-b867-d35as29d8b35   256Mi      RWO            standard       16h
persistentvolumeclaim/app-python-volume-app-python-app-python-1         Bound    pvc-8d7s65df-k432-2381-785v-7dg5s87gsd56   256Mi      RWO            standard       16h
```

2.  Check the content of your file, in each pod:

```bash
[nailya@nailya DevOps-labs]$ kubectl exec app-python-app-python-0 -- cat /app/data/visits.txt
2022-11-29T01:38:18+03:00 - 192.168.250.312
2022-11-29T01:38:18+03:00 - 192.168.250.312
2022-11-29T01:38:18+03:00 - 192.168.250.312
2022-11-29T01:38:19+03:00 - 192.168.250.312
2022-11-29T01:38:19+03:00 - 192.168.250.312
2022-11-29T01:38:19+03:00 - 192.168.250.312
2022-11-29T01:38:19+03:00 - 192.168.250.312
2022-11-29T01:38:19+03:00 - 192.168.250.312
2022-11-29T01:38:19+03:00 - 192.168.250.312
2022-11-29T01:38:19+03:00 - 192.168.250.312
2022-11-29T01:38:19+03:00 - 192.168.250.312
2022-11-29T01:38:19+03:00 - 192.168.250.312
2022-11-29T01:38:20+03:00 - 192.168.250.312
2022-11-29T01:38:20+03:00 - 192.168.250.312
2022-11-29T01:38:20+03:00 - 192.168.250.312
2022-11-29T01:38:20+03:00 - 192.168.250.312
2022-11-29T01:38:20+03:00 - 192.168.250.312
2022-11-29T01:38:20+03:00 - 192.168.250.312
2022-11-29T01:38:20+03:00 - 192.168.250.312
2022-11-29T01:38:21+03:00 - 192.168.250.312
2022-11-29T01:38:21+03:00 - 192.168.250.312
2022-11-29T01:38:21+03:00 - 192.168.250.312
2022-11-29T01:38:21+03:00 - 192.168.250.312
2022-11-29T01:38:21+03:00 - 192.168.250.312
2022-11-29T01:38:21+03:00 - 192.168.250.312
2022-11-29T01:38:21+03:00 - 192.168.250.312
2022-11-29T01:38:21+03:00 - 192.168.250.312
2022-11-29T01:38:22+03:00 - 192.168.250.312
2022-11-29T01:38:22+03:00 - 192.168.250.312
2022-11-29T01:38:22+03:00 - 192.168.250.312
2022-11-29T01:38:22+03:00 - 192.168.250.312
2022-11-29T01:38:22+03:00 - 192.168.250.312
2022-11-29T01:38:22+03:00 - 192.168.250.312
2022-11-29T01:38:23+03:00 - 192.168.250.312
2022-11-29T01:38:23+03:00 - 192.168.250.312
2022-11-29T01:38:23+03:00 - 192.168.250.312
2022-11-29T01:38:23+03:00 - 192.168.250.312
2022-11-29T01:38:23+03:00 - 192.168.250.312
2022-11-29T01:38:23+03:00 - 192.168.250.312
2022-11-29T01:38:24+03:00 - 192.168.250.312
2022-11-29T01:38:24+03:00 - 192.168.250.312
2022-11-29T01:38:24+03:00 - 192.168.250.312
2022-11-29T01:38:24+03:00 - 192.168.250.312
2022-11-29T01:38:24+03:00 - 192.168.250.312
2022-11-29T01:38:24+03:00 - 192.168.250.312
2022-11-29T01:38:24+03:00 - 192.168.250.312
2022-11-29T01:38:25+03:00 - 192.168.250.312
2022-11-29T01:38:25+03:00 - 192.168.250.312
2022-11-29T01:38:25+03:00 - 192.168.250.312
2022-11-29T01:38:25+03:00 - 192.168.250.312
2022-11-29T01:38:25+03:00 - 192.168.250.312
2022-11-29T01:38:26+03:00 - 192.168.250.312
2022-11-29T01:38:26+03:00 - 192.168.250.312
2022-11-29T01:38:26+03:00 - 192.168.250.312
2022-11-29T01:38:26+03:00 - 192.168.250.312
2022-11-29T01:38:26+03:00 - 192.168.250.312
2022-11-29T01:38:27+03:00 - 192.168.250.312
2022-11-29T01:38:27+03:00 - 192.168.250.312
2022-11-29T01:38:27+03:00 - 192.168.250.312
2022-11-29T01:38:27+03:00 - 192.168.250.312
```

```bash
[nailya@nailya DevOps-labs]$ kubectl exec app-python-app-python-0 -- cat /app/data/visits.txt | wc -l
60
```

```bash
[nailya@nailya DevOps-labs]$ kubectl exec app-python-app-python-1 -- cat /app/data/visits.txt
2022-11-29T01:39:05+03:00 - 192.168.250.312
2022-11-29T01:39:06+03:00 - 192.168.250.312
2022-11-29T01:39:06+03:00 - 192.168.250.312
2022-11-29T01:39:06+03:00 - 192.168.250.312
2022-11-29T01:39:06+03:00 - 192.168.250.312
2022-11-29T01:39:06+03:00 - 192.168.250.312
2022-11-29T01:39:07+03:00 - 192.168.250.312
2022-11-29T01:39:07+03:00 - 192.168.250.312
2022-11-29T01:39:07+03:00 - 192.168.250.312
2022-11-29T01:39:07+03:00 - 192.168.250.312
2022-11-29T01:39:07+03:00 - 192.168.250.312
2022-11-29T01:39:07+03:00 - 192.168.250.312
2022-11-29T01:39:07+03:00 - 192.168.250.312
2022-11-29T01:39:07+03:00 - 192.168.250.312
2022-11-29T01:39:08+03:00 - 192.168.250.312
2022-11-29T01:39:08+03:00 - 192.168.250.312
2022-11-29T01:39:08+03:00 - 192.168.250.312
2022-11-29T01:39:08+03:00 - 192.168.250.312
2022-11-29T01:39:09+03:00 - 192.168.250.312
2022-11-29T01:39:09+03:00 - 192.168.250.312
2022-11-29T01:39:09+03:00 - 192.168.250.312
2022-11-29T01:39:09+03:00 - 192.168.250.312
2022-11-29T01:39:09+03:00 - 192.168.250.312
2022-11-29T01:39:09+03:00 - 192.168.250.312
2022-11-29T01:39:09+03:00 - 192.168.250.312
2022-11-29T01:39:09+03:00 - 192.168.250.312
2022-11-29T01:39:10+03:00 - 192.168.250.312
2022-11-29T01:39:10+03:00 - 192.168.250.312
2022-11-29T01:39:10+03:00 - 192.168.250.312
2022-11-29T01:39:10+03:00 - 192.168.250.312
2022-11-29T01:39:10+03:00 - 192.168.250.312
2022-11-29T01:39:11+03:00 - 192.168.250.312
2022-11-29T01:39:11+03:00 - 192.168.250.312
2022-11-29T01:39:11+03:00 - 192.168.250.312
2022-11-29T01:39:11+03:00 - 192.168.250.312
2022-11-29T01:39:11+03:00 - 192.168.250.312
2022-11-29T01:39:11+03:00 - 192.168.250.312
2022-11-29T01:39:11+03:00 - 192.168.250.312
2022-11-29T01:39:12+03:00 - 192.168.250.312
2022-11-29T01:39:12+03:00 - 192.168.250.312
2022-11-29T01:39:12+03:00 - 192.168.250.312
2022-11-29T01:39:12+03:00 - 192.168.250.312
2022-11-29T01:39:12+03:00 - 192.168.250.312
2022-11-29T01:39:12+03:00 - 192.168.250.312
2022-11-29T01:39:12+03:00 - 192.168.250.312
2022-11-29T01:39:12+03:00 - 192.168.250.312
2022-11-29T01:39:12+03:00 - 192.168.250.312
2022-11-29T01:39:13+03:00 - 192.168.250.312
2022-11-29T01:39:13+03:00 - 192.168.250.312
2022-11-29T01:39:13+03:00 - 192.168.250.312
2022-11-29T01:39:13+03:00 - 192.168.250.312
2022-11-29T01:39:13+03:00 - 192.168.250.312
2022-11-29T01:39:14+03:00 - 192.168.250.312
2022-11-29T01:39:14+03:00 - 192.168.250.312
2022-11-29T01:39:14+03:00 - 192.168.250.312
2022-11-29T01:39:14+03:00 - 192.168.250.312
2022-11-29T01:39:14+03:00 - 192.168.250.312
2022-11-29T01:39:14+03:00 - 192.168.250.312
2022-11-29T01:39:14+03:00 - 192.168.250.312
2022-11-29T01:39:14+03:00 - 192.168.250.312
2022-11-29T01:39:15+03:00 - 192.168.250.312
2022-11-29T01:39:15+03:00 - 192.168.250.312
2022-11-29T01:39:15+03:00 - 192.168.250.312
2022-11-29T01:39:15+03:00 - 192.168.250.312
2022-11-29T01:39:15+03:00 - 192.168.250.312
2022-11-29T01:39:16+03:00 - 192.168.250.312
2022-11-29T01:39:16+03:00 - 192.168.250.312
2022-11-29T01:39:16+03:00 - 192.168.250.312
2022-11-29T01:39:17+03:00 - 192.168.250.312
2022-11-29T01:39:17+03:00 - 192.168.250.312
2022-11-29T01:39:17+03:00 - 192.168.250.312
2022-11-29T01:39:17+03:00 - 192.168.250.312
```

```bash
[nailya@nailya DevOps-labs]$ kubectl exec app-python-app-python-1 -- cat /app/data/visits.txt | wc -l
72
```

3. Describe and explain in the report the differences between the output of the command for replicas

In the output I got 60 visits in the first pod and 72 in the second. 

This can be explained by the fact that pods have their own volumes, and requests are not distributed equally.

4. Launch or terminate all Pods in parallel

Use the `podManagementPolicy: Parallel` command

```bash
[nailya@nailya DevOps-labs]$ kubectl get pod
NAME                            READY   STATUS    RESTARTS   AGE
app-python-app-python-0         1/1     Running   0          13s
app-python-app-python-1         1/1     Running   0          13s
```
