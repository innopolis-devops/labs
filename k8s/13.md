# 13 lab

```bash
$ ubectl get po,sts,svc,pvc
NAME                    READY   STATUS    RESTARTS   AGE
pod/app-python-baka-0   1/1     Running   0          47s
pod/app-python-baka-1   1/1     Running   0          47s
NAME                                           READY   AGE
statefulset.apps/app-python-baka-chart   2/2     47s
NAME                            TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE
service/app-python-baka-chart   LoadBalancer   10.107.195.47   <pending>     80:31447/TCP   47s
service/kubernetes              ClusterIP      10.87.0.1       <none>        443/TCP        25h
NAME                                                                    STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
persistentvolumeclaim/app-python-volume-app-python-baka-chart-0   Bound    pvc-892cf287-e7dd-d67e-648b-2949bf0eb777   256Mi      RWO            standard       18h
persistentvolumeclaim/app-python-volume-app-python-baka-chart-1   Bound    pvc-231304c0-0001-8057-ad19-0d3ed92a6e7b   256Mi      RWO            standard       18h
```


$ kubectl exec app-python-app-python-chart-0 -- cat /app/data/visits.txt
2022-11-29T01:11:08+03:00 - 192.168.250.215
2022-11-29T01:11:08+03:00 - 192.168.250.215
2022-11-29T01:11:08+03:00 - 192.168.250.215
2022-11-29T01:11:08+03:00 - 192.168.250.215
2022-11-29T01:11:08+03:00 - 192.168.250.215
2022-11-29T01:11:08+03:00 - 192.168.250.215
2022-11-29T01:11:09+03:00 - 192.168.250.215
2022-11-29T01:11:09+03:00 - 192.168.250.215
2022-11-29T01:11:09+03:00 - 192.168.250.215
2022-11-29T01:11:09+03:00 - 192.168.250.215
2022-11-29T01:11:09+03:00 - 192.168.250.215
2022-11-29T01:11:10+03:00 - 192.168.250.215
2022-11-29T01:11:10+03:00 - 192.168.250.215
2022-11-29T01:11:10+03:00 - 192.168.250.215
2022-11-29T01:11:10+03:00 - 192.168.250.215
2022-11-29T01:11:10+03:00 - 192.168.250.215
2022-11-29T01:11:10+03:00 - 192.168.250.215
2022-11-29T01:11:11+03:00 - 192.168.250.215
2022-11-29T01:11:11+03:00 - 192.168.250.215
2022-11-29T01:11:11+03:00 - 192.168.250.215
2022-11-29T01:11:11+03:00 - 192.168.250.215
2022-11-29T01:11:11+03:00 - 192.168.250.215
2022-11-29T01:11:11+03:00 - 192.168.250.215
2022-11-29T01:11:12+03:00 - 192.168.250.215
2022-11-29T01:11:12+03:00 - 192.168.250.215
2022-11-29T01:11:12+03:00 - 192.168.250.215
2022-11-29T01:11:12+03:00 - 192.168.250.215
2022-11-29T01:11:12+03:00 - 192.168.250.215
2022-11-29T01:11:12+03:00 - 192.168.250.215
2022-11-29T01:11:13+03:00 - 192.168.250.215
2022-11-29T01:11:13+03:00 - 192.168.250.215
2022-11-29T01:11:13+03:00 - 192.168.250.215
2022-11-29T01:11:13+03:00 - 192.168.250.215
2022-11-29T01:11:13+03:00 - 192.168.250.215
2022-11-29T01:11:13+03:00 - 192.168.250.215
2022-11-29T01:11:14+03:00 - 192.168.250.215
2022-11-29T01:11:14+03:00 - 192.168.250.215
2022-11-29T01:11:14+03:00 - 192.168.250.215
2022-11-29T01:11:14+03:00 - 192.168.250.215
2022-11-29T01:11:14+03:00 - 192.168.250.215
2022-11-29T01:11:14+03:00 - 192.168.250.215
2022-11-29T01:11:14+03:00 - 192.168.250.215
2022-11-29T01:11:15+03:00 - 192.168.250.215
2022-11-29T01:11:15+03:00 - 192.168.250.215
2022-11-29T01:11:15+03:00 - 192.168.250.215
2022-11-29T01:11:15+03:00 - 192.168.250.215
2022-11-29T01:11:15+03:00 - 192.168.250.215
2022-11-29T01:11:15+03:00 - 192.168.250.215
2022-11-29T01:11:15+03:00 - 192.168.250.215
2022-11-29T01:11:16+03:00 - 192.168.250.215
```

```bash
$ kubectl exec app-python-app-python-chart-0 -- cat /app/data/visits.txt | wc -l
50
```

```bash
$ kubectl exec app-python-app-python-chart-1 -- cat /app/data/visits.txt
2022-11-29T01:13:12+03:00 - 192.168.250.215
2022-11-29T01:13:13+03:00 - 192.168.250.215
2022-11-29T01:13:13+03:00 - 192.168.250.215
2022-11-29T01:13:13+03:00 - 192.168.250.215
2022-11-29T01:13:13+03:00 - 192.168.250.215
2022-11-29T01:13:13+03:00 - 192.168.250.215
2022-11-29T01:13:13+03:00 - 192.168.250.215
2022-11-29T01:13:13+03:00 - 192.168.250.215
2022-11-29T01:13:14+03:00 - 192.168.250.215
2022-11-29T01:13:14+03:00 - 192.168.250.215
2022-11-29T01:13:14+03:00 - 192.168.250.215
2022-11-29T01:13:14+03:00 - 192.168.250.215
2022-11-29T01:13:14+03:00 - 192.168.250.215
2022-11-29T01:13:14+03:00 - 192.168.250.215
2022-11-29T01:13:15+03:00 - 192.168.250.215
2022-11-29T01:13:15+03:00 - 192.168.250.215
2022-11-29T01:13:15+03:00 - 192.168.250.215
2022-11-29T01:13:15+03:00 - 192.168.250.215
2022-11-29T01:13:15+03:00 - 192.168.250.215
2022-11-29T01:13:16+03:00 - 192.168.250.215
2022-11-29T01:13:16+03:00 - 192.168.250.215
2022-11-29T01:13:16+03:00 - 192.168.250.215
2022-11-29T01:13:16+03:00 - 192.168.250.215
2022-11-29T01:13:16+03:00 - 192.168.250.215
2022-11-29T01:13:17+03:00 - 192.168.250.215
2022-11-29T01:13:17+03:00 - 192.168.250.215
2022-11-29T01:13:17+03:00 - 192.168.250.215
2022-11-29T01:13:17+03:00 - 192.168.250.215
2022-11-29T01:13:18+03:00 - 192.168.250.215
2022-11-29T01:13:18+03:00 - 192.168.250.215
2022-11-29T01:13:18+03:00 - 192.168.250.215
2022-11-29T01:13:18+03:00 - 192.168.250.215
2022-11-29T01:13:18+03:00 - 192.168.250.215
2022-11-29T01:13:18+03:00 - 192.168.250.215
2022-11-29T01:13:18+03:00 - 192.168.250.215
2022-11-29T01:13:18+03:00 - 192.168.250.215
2022-11-29T01:13:19+03:00 - 192.168.250.215
2022-11-29T01:13:19+03:00 - 192.168.250.215
2022-11-29T01:13:19+03:00 - 192.168.250.215
2022-11-29T01:13:19+03:00 - 192.168.250.215
2022-11-29T01:13:19+03:00 - 192.168.250.215
2022-11-29T01:13:20+03:00 - 192.168.250.215
2022-11-29T01:13:20+03:00 - 192.168.250.215
2022-11-29T01:13:20+03:00 - 192.168.250.215
2022-11-29T01:13:20+03:00 - 192.168.250.215
2022-11-29T01:13:20+03:00 - 192.168.250.215
2022-11-29T01:13:21+03:00 - 192.168.250.215
```

```bash
$ kubectl exec app-python-app-python-chart-1 -- cat /app/data/visits.txt | wc -l
47
```

Amount of visits is deffer because Load balancer do not guarantees that will distribute
requests evenly between all pods.
Since pods do not rely on each other, they can be scaled independently. For example use `podManagementPolicy: Parallel`:

```bash
$ kubectl get pod
NAME                    READY   STATUS    RESTARTS   AGE
pod/app-python-baka-0   0/1     Running   0          12s
pod/app-python-baka-1   0/1     Running   0          12s
```

```bash
$ kubectl get pod
NAME                      READY   STATUS    RESTARTS   AGE
app-python-baka-chart-0   1/1     Running   0          14s
app-python-baka-chart-1   1/1     Running   0          14s
```

no bonus because i dont want to do entire course labs again :)