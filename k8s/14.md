## Describe there all components of `Kube Prometheus Stack` and their purpose

`kube-prometheus-stack` consists of:

`The Prometheus Operator` - Deployment of prometheus monitoring tool into k8s

`Prometheus` - Tool for collecting and storing metrics

`Alertmanager` - Tool for handling alerts

`Prometheus node-exporter` - Send hardware and OS metrics to Prometheus

`Prometheus Adapter for Kubernetes Metrics APIs` - Send metrics from k8s to Prometheus

`kube-state-metrics` - Monitor state of the objects from k8s to Prometheus

`Grafana` - Metrics visualization

## Provide the output of the `kubectl get po,sts,svc,pvc,cm` command in the report

Command `kubectl get po,sts,svc,pvc,cm` shows info about Pods, StatefulSets, Services, PersistentVolumeClaims and ConfigMaps:

```bash
[nailya@nailya app-python]$ kubectl get po,sts,svc,pvc,cm
NAME                                                         READY   STATUS    RESTARTS       AGE
pod/alertmanager-monitoring-kube-prometheus-alertmanager-0   2/2     Running   3 (5m6s ago)   19m
pod/app-python-app-python-0                                  1/1     Running   1 (5m6s ago)   19m
pod/app-python-app-python-1                                  1/1     Running   1 (5m6s ago)   19m
pod/monitoring-grafana-bb5785475-lbdmb                       3/3     Running   3 (5m6s ago)   19m
pod/monitoring-kube-prometheus-operator-6f5f678f44-fsn69     1/1     Running   1 (5m6s ago)   19m
pod/monitoring-kube-state-metrics-57479f96d5-bmj4v           1/1     Running   1 (5m6s ago)   19m
pod/monitoring-prometheus-node-exporter-bs2zc                1/1     Running   1 (5m6s ago)   19m
pod/prometheus-monitoring-kube-prometheus-prometheus-0       2/2     Running   2 (5m6s ago)   19m

NAME                                                                    READY   AGE
statefulset.apps/alertmanager-monitoring-kube-prometheus-alertmanager   1/1     19m
statefulset.apps/app-python-app-python                                  2/2     19m
statefulset.apps/prometheus-monitoring-kube-prometheus-prometheus       1/1     19m

NAME                                              TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)                      AGE
service/alertmanager-operated                     ClusterIP      None             <none>        9093/TCP,9094/TCP,9094/UDP   19m
service/app-python-app-python                     LoadBalancer   10.96.151.52     <pending>     80:31086/TCP                 19m
service/kubernetes                                ClusterIP      10.96.0.1        <none>        443/TCP                      22m
service/monitoring-grafana                        ClusterIP      10.104.97.12     <none>        80/TCP                       19m
service/monitoring-kube-prometheus-alertmanager   ClusterIP      10.96.88.69      <none>        9093/TCP                     19m
service/monitoring-kube-prometheus-operator       ClusterIP      10.104.219.100   <none>        443/TCP                      19m
service/monitoring-kube-prometheus-prometheus     ClusterIP      10.99.152.20     <none>        9090/TCP                     19m
service/monitoring-kube-state-metrics             ClusterIP      10.98.143.28     <none>        8080/TCP                     19m
service/monitoring-prometheus-node-exporter       ClusterIP      10.102.96.6      <none>        9100/TCP                     19m
service/prometheus-operated                       ClusterIP      None             <none>        9090/TCP                     19m

NAME                                                                     DATA   AGE
configmap/kube-root-ca.crt                                               1      22m
configmap/monitoring-grafana                                             1      19m
configmap/monitoring-grafana-config-dashboards                           1      19m
configmap/monitoring-kube-prometheus-alertmanager-overview               1      19m
configmap/monitoring-kube-prometheus-apiserver                           1      19m
configmap/monitoring-kube-prometheus-cluster-total                       1      19m
configmap/monitoring-kube-prometheus-controller-manager                  1      19m
configmap/monitoring-kube-prometheus-etcd                                1      19m
configmap/monitoring-kube-prometheus-grafana-datasource                  1      19m
configmap/monitoring-kube-prometheus-grafana-overview                    1      19m
configmap/monitoring-kube-prometheus-k8s-coredns                         1      19m
configmap/monitoring-kube-prometheus-k8s-resources-cluster               1      19m
configmap/monitoring-kube-prometheus-k8s-resources-namespace             1      19m
configmap/monitoring-kube-prometheus-k8s-resources-node                  1      19m
configmap/monitoring-kube-prometheus-k8s-resources-pod                   1      19m
configmap/monitoring-kube-prometheus-k8s-resources-workload              1      19m
configmap/monitoring-kube-prometheus-k8s-resources-workloads-namespace   1      19m
configmap/monitoring-kube-prometheus-kubelet                             1      19m
configmap/monitoring-kube-prometheus-namespace-by-pod                    1      19m
configmap/monitoring-kube-prometheus-namespace-by-workload               1      19m
configmap/monitoring-kube-prometheus-node-cluster-rsrc-use               1      19m
configmap/monitoring-kube-prometheus-node-rsrc-use                       1      19m
configmap/monitoring-kube-prometheus-nodes                               1      19m
configmap/monitoring-kube-prometheus-nodes-darwin                        1      19m
configmap/monitoring-kube-prometheus-persistentvolumesusage              1      19m
configmap/monitoring-kube-prometheus-pod-total                           1      19m
configmap/monitoring-kube-prometheus-prometheus                          1      19m
configmap/monitoring-kube-prometheus-proxy                               1      19m
configmap/monitoring-kube-prometheus-scheduler                           1      19m
configmap/monitoring-kube-prometheus-workload-total                      1      19m
configmap/prometheus-monitoring-kube-prometheus-prometheus-rulefiles-0   29     19m
```

## Grafana dashboard

I had a problem launching Grafana Dashboard, though everything else worked just fine.
It could not find a node port for url, but `service/monitoring-grafana` had a ClusterIP and a port in the output of `kubectl get svc`.

I searched for this problem on the Internet but could not find anything, the only person who asked similar question did not get the answer: https://stackoverflow.com/questions/58169900/service-kube-system-heapster-has-no-node-port-grafana-no-health-point

Maybe the problem appears because of Linux Manjaro I am working on.

`minikube service monitoring-grafana`:

![image](https://github.com/nailyav/DevOps-labs/blob/lab14/k8s/assets/monitoring_grafana.png)

## Init containers

1. `kubectl exec app-python-app-python-0 -- cat /workdir/index.html`:
![image](https://github.com/nailyav/DevOps-labs/blob/lab14/k8s/assets/init0.png)

2. `kubectl exec app-python-app-python-1 -- cat /workdir/index.html`:
![image](https://github.com/nailyav/DevOps-labs/blob/lab14/k8s/assets/init1.png)
