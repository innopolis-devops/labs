# Lab 13 StatefulSets

```console
> kubectl get po,sts,svc,pvc
NAME               READY   STATUS              RESTARTS   AGE
pod/python-helm-0   1/1     Running             0          32s
pod/python-helm-1   1/1     Running   0          32s
pod/python-helm-2   1/1     Running   0          32s

NAME                          READY   AGE
statefulset.apps/python-helm   3/3     32s

NAME                 TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)   AGE
service/app-python   ClusterIP   10.108.245.114    <none>        80/TCP    4s
service/kubernetes   ClusterIP   10.96.0.1        <none>        443/TCP   14d

NAME                                        STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
persistentvolumeclaim/visits-app-python-0   Bound    pvc-183eu180-q34p-68i1-4n3e-84f0hedagaa56  256M       RWO            standard       11m6s
persistentvolumeclaim/visits-app-python-1   Bound    pvc-7h9ery8y-b5t8-3agw-w64a-f6cfl7787831z   256M       RWO            standard       32s
persistentvolumeclaim/visits-app-python-2   Bound    pvc-b89eb387-b538-4af4-8e7d-72c07e7a8f1c   256M       RWO            standard       32s
```

```console
> kubectl exec pod/python-helm-0 -- cat /home/app/data/visits.txt
"Visits:\n2022-11-29T10:44:36+03:00 - 172.17.0.1\n"
> kubectl exec pod/python-helm-1 -- cat /home/app/data/visits.txt
"Visits:\n2022-11-29T10:45:36+03:00 - 172.17.0.1\n"
"Visits:\n2022-11-29T10:45:39+03:00 - 172.17.0.1\n"
> kubectl exec pod/python-helm-2 -- cat /home/app/data/visits.txt
"Visits:\n2022-11-29T10:42:18+03:00 - 172.17.0.1\n"
"Visits:\n2022-11-29T10:42:24+03:00 - 172.17.0.1\n"
```

## Why the output differs?

Visits are different because the file visits.txt is not shared between all replicas. Only one replica handles one request, therefore we have three different versions of /visits output.

## Why ordering guarantee are unnecessary?

Replicas in our system are fully independent and do not communicate. They do not access some common data souce and they all responsible for functionality that has no side effect on other replicas. Thus, ordering is unnecessary in our system.
